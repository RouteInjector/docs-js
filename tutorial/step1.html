
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Step 1 Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="step2.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../installation/">
            
                <a href="../installation/">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../installation/prerequisites.html">
            
                <a href="../installation/prerequisites.html">
            
                    
                    Prerequisites
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../installation/generator.html">
            
                <a href="../installation/generator.html">
            
                    
                    Generator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../installation/folders.html">
            
                <a href="../installation/folders.html">
            
                    
                    Folder structure
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1" data-path="step1.html">
            
                <a href="step1.html">
            
                    
                    Step 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="step2.html">
            
                <a href="step2.html">
            
                    
                    Step 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="step3.html">
            
                <a href="step3.html">
            
                    
                    Step 3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../configuration/">
            
                <a href="../configuration/">
            
                    
                    Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../configuration/environment.html">
            
                <a href="../configuration/environment.html">
            
                    
                    Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../configuration/application.html">
            
                <a href="../configuration/application.html">
            
                    
                    Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../configuration/auth.html">
            
                <a href="../configuration/auth.html">
            
                    
                    Auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../configuration/backoffice.html">
            
                <a href="../configuration/backoffice.html">
            
                    
                    Backoffice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../configuration/bootstrap.html">
            
                <a href="../configuration/bootstrap.html">
            
                    
                    Bootstrap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../configuration/globals.html">
            
                <a href="../configuration/globals.html">
            
                    
                    Globals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../configuration/log.html">
            
                <a href="../configuration/log.html">
            
                    
                    Log
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../configuration/routes.html">
            
                <a href="../configuration/routes.html">
            
                    
                    Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../configuration/session.html">
            
                <a href="../configuration/session.html">
            
                    
                    Session
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../configuration/swagger.html">
            
                <a href="../configuration/swagger.html">
            
                    
                    Swagger
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../models/">
            
                <a href="../models/">
            
                    
                    Models
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../models/schema.html">
            
                <a href="../models/schema.html">
            
                    
                    Schema
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../models/injector.html">
            
                <a href="../models/injector.html">
            
                    
                    Injector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../models/functions.html">
            
                <a href="../models/functions.html">
            
                    
                    Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../models/references.html">
            
                <a href="../models/references.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../models/denormalize.html">
            
                <a href="../models/denormalize.html">
            
                    
                    Denormalization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../models/dependencies.html">
            
                <a href="../models/dependencies.html">
            
                    
                    Dependencies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../routes/">
            
                <a href="../routes/">
            
                    
                    Routes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../routes/default.html">
            
                <a href="../routes/default.html">
            
                    
                    Default routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../routes/custom.html">
            
                <a href="../routes/custom.html">
            
                    
                    Custom routes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../backoffice/">
            
                <a href="../backoffice/">
            
                    
                    Backoffice
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../backoffice/folders.md">
            
                <span>
            
                    
                    Folders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../backoffice/newtypes.html">
            
                <a href="../backoffice/newtypes.html">
            
                    
                    Adding new types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../backoffice/overrideDir.md">
            
                <span>
            
                    
                    Overriding directives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../backoffice/overrideSer.md">
            
                <span>
            
                    
                    Overriding services
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../plugins/">
            
                <a href="../plugins/">
            
                    
                    Plugins
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../plugins/create.html">
            
                <a href="../plugins/create.html">
            
                    
                    Creating a plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../pages/">
            
                <a href="../pages/">
            
                    
                    Pages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../pages/backoffice.html">
            
                <a href="../pages/backoffice.html">
            
                    
                    Backoffice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../pages/standalone.html">
            
                <a href="../pages/standalone.html">
            
                    
                    Standalone
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../typebased/">
            
                <a href="../typebased/">
            
                    
                    TypeBased
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../typebased/references.html">
            
                <a href="../typebased/references.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../typebased/references_with_arrays.html">
            
                <a href="../typebased/references_with_arrays.html">
            
                    
                    Arrays with References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../typebased/arrays.html">
            
                <a href="../typebased/arrays.html">
            
                    
                    Arrays
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../devel/">
            
                <a href="../devel/">
            
                    
                    Development
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../devel/rest.html">
            
                <a href="../devel/rest.html">
            
                    
                    Adding a new REST primitive
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../howto/">
            
                <a href="../howto/">
            
                    
                    Howto
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Step 1</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="step-1-create-your-first-application">Step 1. Create your first application</h1>
<h2 id="prerequisites-installation">Prerequisites installation</h2>
<p>Please make sure that the following prerequisted are installed.</p>
<ul>
<li>NodeJS</li>
<li>Npm</li>
<li>Mongodb</li>
<li>Yeoman</li>
<li>RouteInjector-Generator</li>
</ul>
<h2 id="create-an-empty-app">Create an empty app</h2>
<p>Create a new folder and execute the route-injector generator.</p>
<pre><code class="lang-bash">    mkdir TestApp
    <span class="hljs-built_in">cd</span> TestApp
    yo routeinjector
</code></pre>
<p>Answer the questions about your application. You can choose the template system you want to use, in this case we select ejs.</p>
<p><img src="step1-0.png" alt="Yo Generator global configuration"></p>
<h2 id="use-the-generator-to-create-initial-models">Use the generator to create initial models</h2>
<p>Let&apos;s create a User model with two fields: name and surname; both of them will be of type String.</p>
<p><img src="step1-1.png" alt="Yo Generator User model"></p>
<p>When we finish adding fields to the model the generator ends, but we can call it again for adding additional models.</p>
<p><img src="step1-2.png" alt="Yo Generator Company model"></p>
<p>This second model, Company, has a string field called name and a reference to the previous User model called director.  After this
initial models creation, we can install the required nodejs modules:</p>
<pre><code>    npm install
</code></pre><h2 id="models">Models</h2>
<p>Let&apos;s have a look at the generated User model. All the models are stored in the ./models folder, and a subfolder is 
created for each model. The model configuration is splited in several fields. For the basic models three files: index.js that
loads the additional files, schema.js that defines the schema of the model and injector.js that defines with API routes are 
automagically injected to the model.</p>
<h4 id="user-schema-modelsuserschemajs">User schema (./models/user/schema.js):</h4>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema({
    name: {
        type: <span class="hljs-built_in">String</span>
    },
    surname: {
        type: <span class="hljs-built_in">String</span>
    }
}, {
    id: <span class="hljs-literal">false</span>
});
</code></pre>
<p>In this file, we can see how the two fields are being coded in a Mongoose model.</p>
<h4 id="user-injector-configuration-modelsuserinjectorjs">User injector configuration (./models/user/injector.js):</h4>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
    id: <span class="hljs-string">&quot;_id&quot;</span>,
    path: <span class="hljs-string">&quot;user&quot;</span>,
    plural: <span class="hljs-string">&quot;users&quot;</span>,
    displayField: <span class="hljs-string">&quot;_id&quot;</span>,
    extraDisplayFields: [],
    get: {},
    post: {},
    put: {},
    <span class="hljs-keyword">delete</span>: {},
    search: {}
};
</code></pre>
<p>The injector configuration specifies which routes are injected and their different options:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>identifier of the model</td>
</tr>
<tr>
<td>path</td>
<td>URL prefix where the APIs for this model injected.</td>
</tr>
<tr>
<td>plural</td>
<td>plural version of the model name. Among other stuff, it is used for generating search API URLs.</td>
</tr>
<tr>
<td>displayField</td>
<td>Main field to display (i.e not identifier but human readable). It will be shown in the list view.</td>
</tr>
<tr>
<td>extraDisplayFields</td>
<td>Additional fields to show on the list view of the model.</td>
</tr>
<tr>
<td>get</td>
<td>Route for getting information for a model (API will be generated if field is present).</td>
</tr>
<tr>
<td>post</td>
<td>Route for adding a new instance of the model.</td>
</tr>
<tr>
<td>put</td>
<td>Route for modifying an instance of the model.</td>
</tr>
<tr>
<td>delete</td>
<td>Route for deleting an instance of the model.</td>
</tr>
<tr>
<td>search</td>
<td>Route for search instances of the model (will be named with the plural of the model name).</td>
</tr>
</tbody>
</table>
<p>For the Company model, the generated schema is this:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema({
    name: {
        type: <span class="hljs-built_in">String</span>
    },
    director: {
        type: ObjectId,
        ref: <span class="hljs-string">&apos;User&apos;</span>
    }
}, {
    id: <span class="hljs-literal">false</span>
});
</code></pre>
<p>The relation between Company and User is modeled with a field of type ObjectID (it stores the objectID of the director) and a
ref attribute that specifies the Collection where this field points to.</p>
<h2 id="start-the-application">Start the Application</h2>
<p>Make sure that MongoDB is started in other window.</p>
<pre><code>    mongod
</code></pre><p>Start the application from the main directory.</p>
<pre><code>    npm start
</code></pre><p>Now you can visit the backoffice at <a href="http://localhost:40000/admin" target="_blank">http://localhost:40000/admin</a>.</p>
<p><img src="step1-3.png" alt="Backoffice Home"></p>
<p>Independent pages are generated for each model. Next you can see how the list view of the User model is rendered:</p>
<p><img src="step1-4.png" alt="User list view"></p>
<p>See that the list view lists the users but only shows the id of the different users, so the result is not very easy to understand. In the next
section we are gonna Useralize the backoffice rendering.</p>
<h2 id="basic-personalization">Basic Personalization</h2>
<p>We can modify the display fields, so the list view of the User model will be easier to read: </p>
<h4 id="updated-user-injector-configuration-modelsuserinjectorjs">Updated User injector configuration (./models/user/injector.js):</h4>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
    id: <span class="hljs-string">&quot;_id&quot;</span>,
    path: <span class="hljs-string">&quot;user&quot;</span>,
    plural: <span class="hljs-string">&quot;users&quot;</span>,
    displayField: <span class="hljs-string">&quot;name&quot;</span>,
    extraDisplayFields: [<span class="hljs-string">&quot;surname&quot;</span>],
    get: {},
    post: {},
    put: {},
    <span class="hljs-keyword">delete</span>: {},
    search: {}
};
</code></pre>
<p>For testing the changes, you should restart the NodeJS application because schema information is readed on startup.</p>
<p>Regarding the Company model we can also modify the display fields. Company plural should be &apos;companies&apos; so the plural setting is
modified.</p>
<h4 id="updated-company-injector-configuration-modelscompanyinjectorjs">Updated Company injector configuration (./models/company/injector.js):</h4>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
    id: <span class="hljs-string">&quot;_id&quot;</span>,
    path: <span class="hljs-string">&quot;company&quot;</span>,
    plural: <span class="hljs-string">&quot;companies&quot;</span>,
    displayField: <span class="hljs-string">&quot;name&quot;</span>,
    extraDisplayFields: [],
    get: {},
    post: {},
    put: {},
    <span class="hljs-keyword">delete</span>: {},
    search: {}
};
</code></pre>
<h2 id="swagger">Swagger</h2>
<p>The framework also generates by default a <a href="http://swagger.io/" target="_blank">Swagger</a> API. This documentation helps the developers to use the API generated by the
framework. Remember that this API can be called by the frontend to populate data from the backend. Notice that the search API is called &quot;companies&quot; 
instead of the default of &quot;companys&quot; because we have provided an specific plural in the injector configuration.</p>
<p><img src="step1-5.png" alt="Swagger API"></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Tutorial">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="step2.html" class="navigation navigation-next " aria-label="Next page: Step 2">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Step 1","level":"1.3.1","depth":2,"next":{"title":"Step 2","level":"1.3.2","depth":2,"path":"tutorial/step2.md","ref":"tutorial/step2.md","articles":[]},"previous":{"title":"Tutorial","level":"1.3","depth":1,"path":"tutorial/README.md","ref":"tutorial/README.md","articles":[{"title":"Step 1","level":"1.3.1","depth":2,"path":"tutorial/step1.md","ref":"tutorial/step1.md","articles":[]},{"title":"Step 2","level":"1.3.2","depth":2,"path":"tutorial/step2.md","ref":"tutorial/step2.md","articles":[]},{"title":"Step 3","level":"1.3.3","depth":2,"path":"tutorial/step3.md","ref":"tutorial/step3.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"tutorial/step1.md","mtime":"2019-09-27T11:52:06.413Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-09-27T11:52:56.608Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

